(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,n){e.exports=n(225)},107:function(e,t,n){},223:function(e,t,n){},225:function(e,t,n){"use strict";n.r(t);var o=n(1),l=n.n(o),a=n(14),c=n.n(a),r=(n(107),n(30)),i=n(31),s=n(34),u=n(32),m=n(33),d=n(22),p=n(3),f=n(60),k=n(15),b=n(85),g=(n(211),function(e){return l.a.createElement("div",{className:"toolbar"},e.children)}),y=n(8),v=n.n(y),h=n(86),E=n(87),w=n(88),B=n(89),O=n(90),C=n(91),D=n(92),N=n(93),L=n(94),S=n(95),j=n(96),F=n(56),I=n(97),J=n(98);function P(){var e=Object(I.a)(["\n  display: block;\n  max-width: 100%;\n  max-height: 20em;\n  box-shadow: ",";\n"]);return P=function(){return e},e}var x=Object(J.a)("img")(P(),function(e){return e.selected?"0 0 0 2px blue;":"none"}),M=function(e){return l.a.createElement("strong",null,e.children)},K=function(e){return l.a.createElement("em",{property:"italic"},e.children)},T=function(e){return l.a.createElement("u",{property:"underline"},e.children)},R=function(e){return l.a.createElement("code",{property:"code"},e.children)},A="paragraph",U=Object(k.isKeyHotkey)("tab"),q=Object(k.isKeyHotkey)("shift+tab"),W=Object(k.isKeyHotkey)("return"),H=JSON.parse(localStorage.getItem("content")),_=p.m.fromJSON(H||{document:{nodes:[{object:"block",type:"paragraph",nodes:[{object:"text",leaves:[{text:""}]}]}]}});function z(e){var t=e.type,n=e.key;return{onKeyDown:function(e,o,l){if(!e.ctrlKey||e.key!==n)return l();e.preventDefault(),o.toggleMark(t)}}}var V=[z({key:"b",type:"bold"}),z({key:"i",type:"italic"}),z({key:"u",type:"underline"}),z({key:"`",type:"code"})],Y={document:{last:{type:"paragraph"},normalize:function(e,t){var n=t.code,o=t.node;t.child;if("last_child_type_invalid"===n){var l=p.a.create("paragraph");return e.insertNodeByKey(o.key,o.nodes.size,l)}}},blocks:{image:{isVoid:!0},file:{isVoid:!0}}},$=function(e,t,n){n&&(e.select(n),console.log("Target selected")),e.insertBlock({type:"image",data:{src:t}}).moveFocusToEndOfDocument()},G=function(e,t,n,o){o&&(e.select(o),console.log("Target selected")),e.insertBlock({type:"file",data:{src:t,name:n}}).moveFocusToEndOfDocument()},Q=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).ref=function(e){n.editor=e},n.hasBlock=function(e){return n.state.value.blocks.some(function(t){return t.type===e})},n.onChangeInputOfTopLevelBlockLimit=function(e){console.log(e.target.name,e.target.value),n.setState({topLevelBlockLimit:e.target.value})},n.onChange=function(e){var t=e.value;console.log("onChange value: ",JSON.stringify(t.toJSON())),console.log("onChange current cursor on: ",JSON.stringify(t.blocks.toJSON())),n.setState({value:t})},n.islevelOne=function(e,t,n,o,l,a){var c=!1;return n.document.nodes.forEach(function(e){console.log("Blocks: "),console.log(e.type),console.log(e.key),"numbered-list"!==e.type&&"bulleted-list"!==e.type||e.nodes.forEach(function(e){console.log("Level 1 Blocks: "),console.log(e.type),console.log(e.key),c=!0,"numbered-list"!==e.type&&"bulleted-list"!==e.type||e.nodes.forEach(function(e){console.log("Level 2 Blocks: "),console.log(e.type),console.log(e.key),c=!1,"numbered-list"!==e.type&&"bulleted-list"!==e.type||(console.log("Level 3 Blocks: "),console.log(e.type),console.log(e.key),c=!1)})})}),c},n.onKeyDown=function(e,t,o){var l=t.value,a=l.document,c=n.hasBlock("list-item");console.log("Is block list-item type? "+c);var r=l.blocks.some(function(e){return!!a.getClosest(e.key,function(e){return"numbered-list"===e.type})}),i=l.blocks.some(function(e){return!!a.getClosest(e.key,function(e){return"bulleted-list"===e.type})});if(console.log("Is parent block numbered-list type? "+r),console.log("Is parent block bulleted-list type? "+i),U(e)){var s=!1;l.document.nodes.forEach(function(e){console.log("Blocks: "),console.log(e.type),console.log(e.key),"numbered-list"!==e.type&&"bulleted-list"!==e.type||e.nodes.forEach(function(e){console.log("Level 1 Blocks: "),console.log(e.type),console.log(e.key),s=!1,"numbered-list"!==e.type&&"bulleted-list"!==e.type||e.nodes.forEach(function(e){console.log("Level 2 Blocks: "),console.log(e.type),console.log(e.key),s=!1,"numbered-list"!==e.type&&"bulleted-list"!==e.type||(console.log("Level 3 Blocks: "),console.log(e.type),console.log(e.key),s=!0)})})}),c&&r&&!s?t.wrapBlock("numbered-list"):c&&i&&!s&&t.wrapBlock("bulleted-list"),e.preventDefault()}else if(q(e))c&&r?n.islevelOne(e,t,l)?t.setBlocks(A).unwrapBlock("list-item").unwrapBlock("numbered-list"):t.unwrapBlock("list-item").unwrapBlock("numbered-list"):c&&i&&(n.islevelOne(e,t,l)?t.setBlocks(A).unwrapBlock("list-item").unwrapBlock("bulleted-list"):t.unwrapBlock("list-item").unwrapBlock("bulleted-list")),e.preventDefault();else if(W(e)&&c&&(r||i)){var u=JSON.parse(JSON.stringify(l.blocks.toJSON()));console.log(JSON.stringify(u[0].nodes[0].leaves[0].text)),""===u[0].nodes[0].leaves[0].text&&(c&&r?n.islevelOne(e,t,l)&&t.setBlocks(A).unwrapBlock("list-item").unwrapBlock("numbered-list"):c&&i&&n.islevelOne(e,t,l)&&t.setBlocks(A).unwrapBlock("list-item").unwrapBlock("bulleted-list"),e.preventDefault())}return o()},n.onSaveClick=function(e){if(e.preventDefault(),console.log("onSaveClick"),"undefined"!==typeof Storage){var t=JSON.stringify(n.state.value.toJSON());if(console.log("Content ",t),JSON.parse(t).document.nodes.length>n.state.topLevelBlockLimit&&0!=n.state.topLevelBlockLimit)return void alert("Can not save due crossed the limit of blocks \nYou set the limit is "+n.state.topLevelBlockLimit);localStorage.setItem("content",t)}else console.log("Sorry, your browser does not support Web Storage...")},n.onCancelClick=function(e){e.preventDefault(),n.setState({value:_})},n.onMarkClick=function(e,t){e.preventDefault();var o=n.editor.toggleMark(t);n.onChange(o)},n.onBlockClick=function(e,t){e.preventDefault();var o=Object(d.a)(Object(d.a)(n)).editor,l=o.value,a=l.document;if("bulleted-list"!==t&&"numbered-list"!==t){var c=n.hasBlock(t);n.hasBlock("list-item")?o.setBlocks(c?A:t).unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):o.setBlocks(c?A:t)}else{var r=n.hasBlock("list-item"),i=l.blocks.some(function(e){return!!a.getClosest(e.key,function(e){return e.type===t})});r&&i?o.setBlocks(A).unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):r?o.unwrapBlock("bulleted-list"===t?"numbered-list":"bulleted-list").wrapBlock(t):o.setBlocks("list-item").wrapBlock(t)}},n.onImageClick=function(e){e.preventDefault();var t=window.prompt("Enter the URL of the image:");t&&n.editor.command($,t)},n.onOpenImage=function(e){e.preventDefault(),n.inputImageFile.current.click()},n.onOpenFile=function(e){e.preventDefault(),n.inputFile.current.click()},n.onFileSelect=function(e){e.preventDefault();var t=e.target.files[0];console.log("File ",t);var o=new FileReader,l=Object(f.b)(e,n.editor);console.log(l),l&&console.log("hey you target"),["image/gif","image/jpeg","image/jpg","image/png"].includes(t.type)?(console.log("This is image type file."),o.addEventListener("load",function(){n.editor.command($,o.result,l,e)}),o.readAsDataURL(t)):["text/plain","application/pdf"].includes(t.type)?(console.log("This is document type file."),o.addEventListener("load",function(){n.editor.command(G,o.result,t.name,l)}),o.readAsDataURL(t)):alert("Invalid file type.")},n.onDocumentFileClick=function(e,t,n){e.preventDefault(),Object(b.confirmAlert)({title:"Are you sure?",message:"Want to download "+t,buttons:[{label:"Yes",onClick:function(){console.log("Download started...");var e=document.createElement("a");e.download=t,e.href=n.toString(),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{label:"No"}]})},n.renderMark=function(e,t,n){switch(e.mark.type){case"bold":return l.a.createElement(M,e);case"italic":return l.a.createElement(K,e);case"underline":return l.a.createElement(T,e);case"code":return l.a.createElement(R,e);default:return n()}},n.renderNode=function(e,t,o){var a=e.attributes,c=e.children,r=e.node,i=e.isFocused;switch(r.type){case"block-quote":return l.a.createElement("blockquote",a,c);case"heading-one":return l.a.createElement("h1",a,c);case"heading-two":return l.a.createElement("h2",a,c);case"list-item":return l.a.createElement("li",a,c);case"numbered-list":return l.a.createElement("ol",a,c);case"bulleted-list":return l.a.createElement("ul",a,c);case"image":var s=r.data.get("src");return l.a.createElement(x,{src:s,selected:i,alt:"",className:"image-node"});case"file":var u=r.data.get("src"),m=r.data.get("name");return l.a.createElement("a",{download:m,href:u},l.a.createElement("span",{onClick:function(e){return n.onDocumentFileClick(e,m,u)}},l.a.createElement(v.a,{icon:F.file})," ",m));default:return o()}},n.state={value:_,topLevelBlockLimit:0},n.inputImageFile=l.a.createRef(),n.inputFile=l.a.createRef(),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=JSON.stringify(this.state.value.toJSON()),n=JSON.parse(t);return l.a.createElement(o.Fragment,null,l.a.createElement(g,null,l.a.createElement("span",null,"Enter the limit of blocks "),l.a.createElement("input",{name:"topLevelBlockLimit",type:"number",value:0===this.state.topLevelBlockLimit?0:this.state.topLevelBlockLimit,onChange:this.onChangeInputOfTopLevelBlockLimit})),l.a.createElement(g,null,l.a.createElement("button",{className:"button",disabled:n.document.nodes.length>this.state.topLevelBlockLimit&&0!=this.state.topLevelBlockLimit,onPointerDown:function(t){return e.onSaveClick(t)}},"Save"),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onCancelClick(t)}},"Cancel"),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onMarkClick(t,"bold")}},l.a.createElement(v.a,{icon:h.bold})),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onMarkClick(t,"italic")}},l.a.createElement(v.a,{icon:E.italic})),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onMarkClick(t,"underline")}},l.a.createElement(v.a,{icon:w.underline})),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onMarkClick(t,"code")}},l.a.createElement(v.a,{icon:B.code})),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onBlockClick(t,"heading-one")}},l.a.createElement(v.a,{icon:O.arrowUp})),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onBlockClick(t,"heading-two")}},l.a.createElement(v.a,{icon:C.arrowDown})),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onBlockClick(t,"block-quote")}},l.a.createElement(v.a,{icon:D.quote})),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onBlockClick(t,"numbered-list")}},l.a.createElement(v.a,{icon:N.listOl})),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onBlockClick(t,"bulleted-list")}},l.a.createElement(v.a,{icon:L.listUl})),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onImageClick(t)}},l.a.createElement(v.a,{icon:S.image})),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onOpenImage(t)}},l.a.createElement(v.a,{icon:j.fileImageO})),l.a.createElement("button",{className:"button",onPointerDown:function(t){return e.onOpenFile(t)}},l.a.createElement(v.a,{icon:F.file}))),l.a.createElement("div",null,l.a.createElement("input",{ref:this.inputImageFile,type:"file",style:{display:"none"},onChange:this.onFileSelect,accept:"image/*"}),l.a.createElement("input",{ref:this.inputFile,type:"file",style:{display:"none"},onChange:this.onFileSelect,accept:"application/pdf,text/plain"})),l.a.createElement(f.a,{spellCheck:!0,autoFocus:!0,tabIndex:-1,placeholder:"Enter text here...",plugins:V,schema:Y,value:this.state.value,ref:this.ref,onChange:this.onChange,onKeyDown:this.onKeyDown,renderMark:this.renderMark,renderNode:this.renderNode}))}},{key:"componentDidMount",value:function(){this.editor.focus()}}]),t}(o.Component),X=(n(223),function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(Q,null))}}]),t}(o.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(224);c.a.render(l.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[102,1,2]]]);
//# sourceMappingURL=main.d414d66e.chunk.js.map